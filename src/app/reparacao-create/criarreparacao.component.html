<!-- Material form register -->
<mdb-card class="reparacoes">
  <mdb-card-header class="info-color white-text text-center py-4">
    <h5>Criar reparação</h5>
  </mdb-card-header>
  
  <mdb-card-body class="px-lg-5 pt-0">

    <!-- Form -->

    <div class="container reparacoes-container">
      <form [formGroup]="reparacaoForm" (ngSubmit)="createReparacao()">
     
        <!-- name -->
        <div class="md-form mt-0"> 
          <label class="control-label">Cliente</label>
          <select class="mat-select select" formControlName="name_id" required>
            <option [value]="option.id" *ngFor="let option of clientOptions">{{option.name}}
            </option>
          </select>
          <div  *ngFor="let validation of validation_messages.name_id">
            <span class="help-block form-error text-danger" 
              *ngIf="reparacaoForm.controls['name_id'].touched
              && reparacaoForm.controls['name_id'].errors?.required">{{validation.message}}
            </span>
          </div>
        </div>  
        <!-- price -->
          <div class="md-form mt-0">    
            <input type="number" formControlName="price" class="form-control" mdbInputDirective>
            <label>Preço</label>
            <div  *ngFor="let validation of validation_messages.price">
              <span class="help-block form-error text-danger " 
                *ngIf="reparacaoForm.controls['price'].errors?.required &&
                reparacaoForm.controls['price'].touched">{{validation.message}}
              </span>
            </div>
          </div>  
        <!-- PAGAMENTO PARCIAL -->
        <div class="md-form mt-0">    
          <input type="number" formControlName="pagamento_parcial" class="form-control" mdbInputDirective>
          <label>Pagamento parcial</label>
          <div  *ngFor="let validation of validation_messages.pagamento_parcial">
            <span class="help-block form-error text-danger small" 
              *ngIf="reparacaoForm.controls['pagamento_parcial'].errors?.required &&
              reparacaoForm.controls['pagamento_parcial'].touched">{{validation.message}}
            </span>
          </div>
        </div>
        <!-- budget -->
        <div class="md-form mt-0">    
          <input type="number" formControlName="budget" class="form-control" mdbInputDirective>
          <label>Orçamento</label>
          <div  *ngFor="let validation of validation_messages.budget">
            <span class="help-block form-error text-danger" 
              *ngIf="reparacaoForm.controls['budget'].errors?.required &&
              reparacaoForm.controls['budget'].touched">{{validation.message}}
            </span>
          </div>
                
        </div>
        <!-- weigth -->
        <div class="md-form mt-0">    
          <input type="number" formControlName="weigth" class="form-control" mdbInputDirective>
          <label>Peso</label>
          <div  *ngFor="let validation of validation_messages.weigth">
            <span class="help-block form-error text-danger small" 
              *ngIf="reparacaoForm.controls['weigth'].errors?.required &&
              reparacaoForm.controls['weigth'].touched">{{validation.message}}
            </span>
          </div>
        </div>    
        <!-- description -->
        <div class="md-form mt-0">
          <textarea type="text" formControlName="description"  class="md-textarea form-control" mdbInputDirective>
          </textarea>
          <label>Descrição</label>
          <div  *ngFor="let validation of validation_messages.description">
            <span class="help-block form-error text-danger " 
              *ngIf="reparacaoForm.controls['description'].errors?.maxlength &&
              reparacaoForm.controls['description'].touched">{{validation.message}}
            </span>
          </div>
        </div>
        <!-- foto -->
        <!--
        <div class="md-form mt-0">    
          <input type="text" formControlName="foto" class="form-control" mdbInputDirective>
          <label>Imagem</label>
        </div>  
        -->
        <!-- materials -->
        <div class="md-form mt-0">
          <textarea type="text" formControlName="materials"  class="md-textarea form-control" mdbInputDirective>
          </textarea>
          <label>Materiais</label>
        </div>
        <!-- date_completed -->
        <div class="md-form mt-0 input-group">
          <div class="input-group-append">
            <input type="text" placeholder="yyyy-mm-dd" name="dp" ngbDatepicker #d="ngbDatepicker" formControlName="date_completed" class="form-control" mdbInputDirective>
            <button class="btn btn-secondary calendar " (click)=[d.toggle()]  type="button" title="Calendário">
              <i class="fa fa-calendar" aria-hidden="true"></i>
            </button>
          </div>
          <label>Data de conclusão</label>
        </div>  
        <!-- faturado -->
        <div class="md-form mt-0">
          <input type="checkbox" formControlName="faturado"  class="md-textarea form-control" mdbInputDirective>
          <label>Faturado</label>
        </div>
        <!-- pago -->
        <div class="md-form mt-0">
          <input type="checkbox" formControlName="pago"  class="md-textarea form-control" mdbInputDirective>
          <label>Pago</label>
        </div>

        <div class="md-form mt-0">    
          <input type="number" formControlName="discount" class="form-control" mdbInputDirective>
          <label>Desconto</label>
          <!-- <div  *ngFor="let validation of validation_messages.budget">
            <span class="help-block form-error text-danger" 
              *ngIf="reparacaoForm.controls['budget'].errors?.required &&
              reparacaoForm.controls['budget'].touched">{{validation.message}}
            </span>
          </div>
                 -->
        </div>

        <div class="md-form mt-0">    
          <input type="number" formControlName="quantity" class="form-control" mdbInputDirective>
          <label>Quantidade</label>
          <!-- <div  *ngFor="let validation of validation_messages.budget">
            <span class="help-block form-error text-danger" 
              *ngIf="reparacaoForm.controls['budget'].errors?.required &&
              reparacaoForm.controls['budget'].touched">{{validation.message}}
            </span>
          </div> -->
                
        </div>
        <div class="md-form mt-0">    
          <input type="number" formControlName="units" class="form-control" mdbInputDirective>
          <label>Unidades</label>
          <!-- <div  *ngFor="let validation of validation_messages.budget">
            <span class="help-block form-error text-danger" 
              *ngIf="reparacaoForm.controls['budget'].errors?.required &&
              reparacaoForm.controls['budget'].touched">{{validation.message}}
            </span>
          </div> -->
                  
        </div>
        <div class="md-form mt-0">    
          <input type="number" formControlName="tax" class="form-control" mdbInputDirective>
          <label>Iva</label>
          <!-- <div  *ngFor="let validation of validation_messages.budget">
            <span class="help-block form-error text-danger" 
              *ngIf="reparacaoForm.controls['budget'].errors?.required &&
              reparacaoForm.controls['budget'].touched">{{validation.message}}
            </span>
          </div> -->
                  
        </div>
        <div class="md-form mt-0">    
          <input type="number" formControlName="tax_to_pay" class="form-control" mdbInputDirective>
          <label>Valor do Iva</label>
          <!-- <div  *ngFor="let validation of validation_messages.budget">
            <span class="help-block form-error text-danger" 
              *ngIf="reparacaoForm.controls['budget'].errors?.required &&
              reparacaoForm.controls['budget'].touched">{{validation.message}}
            </span>
          </div> -->
                  
        </div>
        <div class="md-form mt-0">    
          <input type="number" formControlName="total_to_pay" class="form-control" mdbInputDirective>
          <label>Total s/ iva</label>
          <!-- <div  *ngFor="let validation of validation_messages.budget">
            <span class="help-block form-error text-danger" 
              *ngIf="reparacaoForm.controls['budget'].errors?.required &&
              reparacaoForm.controls['budget'].touched">{{validation.message}}
            </span>
          </div> -->
                  
        </div>
        <div class="md-form mt-0">    
          <input type="number" formControlName="total_to_pay_with_tax" class="form-control" mdbInputDirective>
          <label>Total c/ iva</label>
          <!-- <div  *ngFor="let validation of validation_messages.budget">
            <span class="help-block form-error text-danger" 
              *ngIf="reparacaoForm.controls['budget'].errors?.required &&
              reparacaoForm.controls['budget'].touched">{{validation.message}}
            </span>
          </div> -->
                  
        </div>

        <div class="col-md-3 flex-center">
          <div class="flex-item">
            <button mdbBtn color="success" block="true" class="my-4" type="submit" [disabled]="!reparacaoForm.valid" title="Guardar Reparação">
              <i class="fa fa-save" aria-hidden="true"></i>
              
            </button>
          </div> 
          <div class="flex-item">
            <button mdbBtn color="danger" block="true" class="my-4" (click)="gotoList()" title="Cancelar">
              <i class="fa fa-remove" aria-hidden="true"></i>
              
            </button>
          </div>
        </div>
    
      </form>
    </div>
    <!-- Form -->

  </mdb-card-body>

</mdb-card>